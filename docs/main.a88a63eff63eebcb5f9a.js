!function(e){function t(t){for(var r,a,s=t[0],l=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;i.push([121,1]),n()}({121:function(e,t,n){n(122),e.exports=n(309)},308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t),n.d(t,"firebase",(function(){return z}));n(308);var r=/^\w+@\w+\.\w{2,}$/,o=(document.querySelector(".burger-menu"),document.querySelector(".header__authorization")),i=document.querySelector(".user"),a=document.querySelector(".sidebar"),s=(a.querySelector("sidebar__link-list"),a.querySelector("sidebar__link-trash"),a.querySelector("sidebar__link-settings"),document.querySelector(".modal-new-list")),l=document.querySelector(".modal-rename-list"),u=document.querySelector(".authorization"),c=u.querySelector(".authorization__form"),d=c.querySelector(".authorization__close"),f=c.querySelector(".authorization__forget"),p=c.querySelector(".authorization__input-email"),m=c.querySelector(".authorization__input-pass"),v=c.querySelector(".authorization__btn_sign-up"),_=c.querySelector(".authorization__btn_sign-in"),h=document.querySelector(".log-out"),y=document.querySelector(".log-out__email"),g=h.querySelector(".log-out__btn"),b=h.querySelector(".log-out__close-btn"),L=document.querySelector(".lists");function S(e,t){var n=document.createElement(e);return n.className=t,n}function w(e,t,n){e.addEventListener("click",(function r(){t.classList.add("".concat(n,"_is-open")),e.removeEventListener("click",r),setTimeout((function(){document.addEventListener("click",(function o(i){var a=i.target;a===t||a.closest(".".concat(n))&&!a.classList.contains("".concat(n,"__close-btn"))||(t.classList.remove("".concat(n,"_is-open")),document.removeEventListener("click",o),e.addEventListener("click",r))}))}))}))}function q(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var k={user:null,initUser:function(){var e=this;z.auth().onAuthStateChanged((function(){e.user=z.auth().currentUser,console.log(k.user),k.user?(o.style.display="none",i.style.display="",u.classList.remove("authorization_is-open")):(console.log("no setUser"),o.style.display="",i.style.display="none"),e.user&&e.user.displayName&&e.updateUserInfo()}))},signIn:function(e,t){if(!r.test(e))return alert("Email is not valid");z.auth().signInWithEmailAndPassword(e,t).catch((function(e){var t=e.code,n=e.message;"auth/wrong-password"===t?alert("Wrong password"):"auth/user-not-found"==t?alert("User not found"):alert(n)}))},signUp:function(e,t){var n=this;r.test(e)?e.trim()&&t.trim()?z.auth().createUserWithEmailAndPassword(e,t).then((function(t){var r=e.substring(0,e.indexOf("@"));z.auth().currentUser.updateProfile({displayName:r}).then((function(){var t;n.updateUserInfo(),(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,z.database().ref("users").on("value",(function(e){n=e.val()||[]}));case 3:n.push(e),z.database().ref("users").set(n);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){q(i,r,o,a,s,"next",e)}function s(e){q(i,r,o,a,s,"throw",e)}a(void 0)}))})()}))})).catch((function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("Слабый пароль"):"auth/email-already-in-use"==t?alert("Этот email уже используется"):(console.log(e),console.log(t),console.log(n))})):alert("Введите даные"):alert("email is not valid")},logOut:function(){z.auth().signOut()},sendForget:function(e){if(!r.test(e))return alert("email is not valid");z.auth().sendPasswordResetEmail(e).then((function(){alert("Письмо отправлено")})).catch((function(e){"auth/user-not-found"==e.code?alert("User not found"):alert(e.message)}))},updateUserInfo:function(){i.innerHTML=this.user.displayName[0].toUpperCase(),y.innerHTML=this.user.email}},E=function(e){var t=[];z.database().ref("".concat(e,"/lists")).on("value",(function(e){t=e.val()||[]})),L.innerHTML="";var n=S("button","add-list-btn");n.innerHTML="+",L.append(n),n.addEventListener("click",(function(e){e.preventDefault(),s.classList.add("modal_is-open")})),t.forEach((function(e){var t=S("div","list-elem"),n='\n        <h2 class="list-elem__name">'.concat(e.name,'</h2>\n        <span class="list-elem__counter">0 / 0</span>\n        <div class="list-elem__options">\n          <img src="./img/dots.svg" alt="" />\n    \n          <div class="list-elem__options-list">\n            <a href="#" class="list-elem__options-list-elem">Rename</a>\n            <a href="#" class="list-elem__options-list-elem">Delete</a>\n          </div>\n        </div>\n        <div class="list-elem__progress">\n          <div class="list-elem__progress_blue"></div>\n        </div>\n      ');t.innerHTML=n,w(t.querySelector(".list-elem__options"),t.querySelector(".list-elem__options-list"),"list-elem__options-list"),L.insertAdjacentElement("beforeend",t)}))},z=window.firebase;z.initializeApp({apiKey:"AIzaSyBWD1NHPb3KwMzsvX05WLUPqxWMgC2RLTw",authDomain:"buylist-b265a.firebaseapp.com",databaseURL:"https://buylist-b265a-default-rtdb.firebaseio.com",projectId:"buylist-b265a",storageBucket:"buylist-b265a.appspot.com",messagingSenderId:"753800425123",appId:"1:753800425123:web:c4e4e589ba986cf1511916"}),z.database().ref("jnnMDhmsAjeXnVpeTlLeSNY8Zdn1/lists").set([{name:"name1"},{name:"name2",items:[{name:"itemName",cost:"itemCost"}]}]),k.initUser(),o.addEventListener("click",(function(e){u.classList.add("authorization_is-open")})),u.addEventListener("click",(function(e){e.target===u&&u.classList.remove("authorization_is-open")})),d.addEventListener("click",(function(e){e.preventDefault(),e.target===d&&u.classList.remove("authorization_is-open")})),f.addEventListener("click",(function(e){e.preventDefault(),k.sendForget(p.value)})),v.addEventListener("click",(function(e){e.preventDefault(),k.signUp(p.value,m.value)})),w(i,h,"log-out"),g.addEventListener("click",(function(){h.classList.remove("log-out_is-open"),k.logOut()})),b.addEventListener("click",(function(){h.classList.remove("log-out_is-open")})),_.addEventListener("click",(function(e){e.preventDefault(),k.signIn(p.value,m.value)})),s.addEventListener("click",(function(e){e.target.classList.contains("modal")&&(s.classList.remove("modal_is-open"),s.querySelector(".modal__input").value="")})),l.addEventListener("click",(function(e){e.target.classList.contains("modal")&&l.classList.remove("modal_is-open")})),E("jnnMDhmsAjeXnVpeTlLeSNY8Zdn1")}});